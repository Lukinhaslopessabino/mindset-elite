<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="UTF-8">
<title>Admin Secure Access</title>

<link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&display=swap" rel="stylesheet">

<style>
*{margin:0;padding:0;box-sizing:border-box;font-family:'Orbitron',sans-serif;}

body{
height:100vh;
background:#000;
display:flex;
justify-content:center;
align-items:center;
color:#fff;
overflow:hidden;
}

/* MATRIX */
canvas{
position:fixed;
top:0;
left:0;
z-index:-2;
}

/* LOGIN CARD */
.card{
width:420px;
padding:50px;
border-radius:25px;
background:rgba(0,0,0,0.85);
border:1px solid rgba(0,153,255,0.5);
box-shadow:0 0 40px rgba(0,153,255,0.7);
text-align:center;
z-index:2;
}

h1 span{
color:#00BFFF;
text-shadow:0 0 20px #0099FF;
}

input{
width:100%;
padding:14px;
border-radius:12px;
border:1px solid #0099FF;
background:rgba(0,153,255,0.08);
color:#fff;
margin-bottom:20px;
}

button{
width:100%;
padding:14px;
border-radius:30px;
border:none;
background:linear-gradient(90deg,#0099FF,#00CFFF);
color:#fff;
cursor:pointer;
}

button:hover{
box-shadow:0 0 30px #0099FF;
}

/* SCANNER */
.scanner{
margin:25px auto;
width:120px;
height:120px;
border-radius:50%;
border:2px solid #00FFAA;
display:none;
overflow:hidden;
position:relative;
}

.scan-line{
position:absolute;
width:100%;
height:4px;
background:#00FFAA;
animation:scan 1.5s linear infinite;
box-shadow:0 0 20px #00FFAA;
}

@keyframes scan{
0%{top:-4px;}
100%{top:120px;}
}

/* STATUS */
.status{
margin-top:20px;
font-size:14px;
min-height:24px;
}

.success{color:#00FFAA;}
.error{color:#FF4C4C;}

/* DASHBOARD */
.dashboard{
background:rgba(10,10,20,0.95);
padding:30px;
border-radius:20px;
box-shadow:0 0 40px rgba(0,153,255,0.4);
margin-top:40px;
display:none;
width:600px;
}

.top-bar{
display:flex;
justify-content:space-between;
margin-bottom:20px;
}

.stats{
display:flex;
gap:20px;
margin-bottom:20px;
}

.card-stat{
flex:1;
background:rgba(0,153,255,0.08);
padding:20px;
border-radius:15px;
text-align:center;
border:1px solid rgba(0,153,255,0.3);
}

.card-stat p{
font-size:28px;
color:#00ffcc;
}

.actions{
display:flex;
gap:15px;
margin-bottom:20px;
}

.btn-primary{
flex:1;
background:linear-gradient(90deg,#0099FF,#00CFFF);
border:none;
padding:12px;
border-radius:12px;
color:#fff;
cursor:pointer;
}

.btn-danger{
flex:1;
background:linear-gradient(90deg,#FF3B3B,#FF0000);
border:none;
padding:12px;
border-radius:12px;
color:#fff;
cursor:pointer;
}

.resultado{
background:#111;
padding:15px;
border-radius:10px;
max-height:250px;
overflow:auto;
font-size:13px;
}

/* LOADING FULL */
#matrixLoading{
position:fixed;
top:0;
left:0;
width:100%;
height:100%;
background:#000;
display:none;
justify-content:center;
align-items:center;
color:#00FF00;
font-size:22px;
z-index:999;
}
</style>
</head>

<body>

<canvas id="matrix"></canvas>

<div class="card" id="loginBox">
<h1><span>Secure</span> Admin</h1>
<input type="password" id="senha" placeholder="Digite sua senha segura">
<button onclick="login()">Iniciar VerificaÃ§Ã£o</button>
<div class="scanner" id="scanner"><div class="scan-line"></div></div>
<div class="status" id="statusMsg"></div>
</div>

<div class="dashboard" id="painel">
<div class="top-bar">
<h2>ðŸš€ Admin Dashboard</h2>
<span>SECURE MODE</span>
</div>

<div class="stats">
<div class="card-stat">
<h3>Vagas</h3>
<p id="vagaCount">--</p>
</div>

<div class="card-stat">
<h3>Inscritos</h3>
<p id="inscritoCount">--</p>
</div>
</div>

<div class="actions">
<button class="btn-primary" onclick="verInscritos()">Ver Inscritos</button>
<button class="btn-danger" onclick="resetar()">Resetar Vaga</button>
</div>

<div id="resultado" class="resultado"></div>
</div>

<div id="matrixLoading">ACESSO CONFIRMADO â€” INICIANDO SISTEMA...</div>

<audio id="successSound" src="https://assets.mixkit.co/sfx/preview/mixkit-unlock-game-notification-253.mp3"></audio>
<audio id="errorSound" src="https://assets.mixkit.co/sfx/preview/mixkit-wrong-answer-buzz-950.mp3"></audio>

<script>

/* MATRIX */
const canvas = document.getElementById("matrix");
const ctx = canvas.getContext("2d");
canvas.height = window.innerHeight;
canvas.width = window.innerWidth;
const letters = "01ADMINSECUREACCESS".split("");
const fontSize = 16;
const columns = canvas.width / fontSize;
const drops = [];
for(let x=0;x<columns;x++) drops[x]=1;

function draw(){
ctx.fillStyle="rgba(0,0,0,0.05)";
ctx.fillRect(0,0,canvas.width,canvas.height);
ctx.fillStyle="#00FF00";
ctx.font=fontSize+"px monospace";
for(let i=0;i<drops.length;i++){
const text=letters[Math.floor(Math.random()*letters.length)];
ctx.fillText(text,i*fontSize,drops[i]*fontSize);
if(drops[i]*fontSize>canvas.height && Math.random()>0.975)
drops[i]=0;
drops[i]++;
}
}
setInterval(draw,33);

/* LOGIN */
async function login(){
const senha = document.getElementById("senha").value;
const scanner = document.getElementById("scanner");
const statusMsg = document.getElementById("statusMsg");
const successSound = document.getElementById("successSound");
const errorSound = document.getElementById("errorSound");
const painel = document.getElementById("painel");
const loginBox = document.getElementById("loginBox");
const matrixLoading = document.getElementById("matrixLoading");

statusMsg.innerHTML="ðŸ§  Verificando credenciais...";
scanner.style.display="block";

await new Promise(r=>setTimeout(r,2000));

const res = await fetch("/admin/login",{
method:"POST",
headers:{"Content-Type":"application/json"},
body: JSON.stringify({ senha })
});

if(!res.ok){
scanner.style.display="none";
statusMsg.innerHTML="âŒ Acesso Negado";
statusMsg.className="status error";
errorSound.play();
return;
}

successSound.play();
statusMsg.innerHTML="âœ… Acesso Autorizado";
statusMsg.className="status success";

await new Promise(r=>setTimeout(r,1500));

matrixLoading.style.display="flex";
await new Promise(r=>setTimeout(r,2000));
matrixLoading.style.display="none";

loginBox.style.display="none";
painel.style.display="block";

atualizarStats();
}

/* VER INSCRITOS */
async function verInscritos(){
const senha = document.getElementById("senha").value;

const res = await fetch("/admin/inscritos",{
method:"POST",
headers:{"Content-Type":"application/json"},
body: JSON.stringify({ senha })
});

const data = await res.json();

document.getElementById("resultado").innerHTML =
"<pre>"+JSON.stringify(data.inscritos,null,2)+"</pre>";

document.getElementById("inscritoCount").innerText =
data.inscritos.length;

document.getElementById("vagaCount").innerText =
data.vagas;
}

/* RESETAR */
async function resetar(){
const senha = document.getElementById("senha").value;

await fetch("/admin/resetar",{
method:"POST",
headers:{"Content-Type":"application/json"},
body: JSON.stringify({ senha })
});

alert("Vaga resetada para 1");
atualizarStats();
}

/* ATUALIZAR STATS */
async function atualizarStats(){
const senha = document.getElementById("senha").value;

const res = await fetch("/admin/inscritos",{
method:"POST",
headers:{"Content-Type":"application/json"},
body: JSON.stringify({ senha })
});

const data = await res.json();

document.getElementById("inscritoCount").innerText =
data.inscritos.length;

document.getElementById("vagaCount").innerText =
data.vagas;
}

</script>

</body>
</html>
